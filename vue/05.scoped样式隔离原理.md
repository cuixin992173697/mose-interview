## scoped 原理和样式穿透

### scoped 作用

scoped 是将该组件的 css 样式表只作用于组件自身，不影响父组件和子组件的样式。

### scoped 原理

#### 1.给 html 标签加上 data-v-hash 属性

scoped 会给哪些 html 标签加上 data-v-hash 属性呢？

1.该组件中除子组件外的所有 html 标签

2.当子组件只有一个根元素时，会给子组件的根元素加上该属性。

scoped 会完全把父子组件的样式分割吗？

子组件只有一个根元素时会挂载父元素的 data-v-hash 属性。若根标签为<div>，会影响到子组件的根标签<div>

```
<!-- 父组件 -->
<template>
  <div class="parent">
    <Child />
  </div>
</template>

<script setup>
import Child from './Child.vue'
</script>

<style scoped>
/* 父组件 scoped 样式 */
.parent {
  border: 2px solid red;
  padding: 10px;
}

/* 注意：这里的 div 会作用到子组件的根节点 */
div {
  background-color: lightyellow;
}
</style>

<!-- 子组件 -->
<template>
  <div class="child">
    子组件内容
  </div>
</template>

<style scoped>
.child {
  color: blue;
}
</style>

```

渲染结果：

```
<div class="parent" data-v-parent>
  <div class="child" data-v-child data-v-parent>子组件内容</div>
</div>
```

最终样式表现

背景色 lightyellow：来自 父组件的样式（生效 ✅）

文字颜色 blue：来自 子组件的样式（也生效 ✅）

3.父组件对子组件的根标签添加样式，和子组件自己给根标签添加样式，谁的优先级高？

父组件权重更高

#### 2.给 css 选择器加上 [data-v-hash] 属性选择器

### 样式穿透

::v-deep 选择器{}做样式穿透，可以配合!important 一起使用
